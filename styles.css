:root{ --vino:#75142e; --dorado:#b8935c; --tinta:#1b1b1b; --papel:#fff; --niebla:#f5f5f5; --borde:#e5e5e5 }
.card{ background:var(--papel); border:1px solid var(--borde); border-radius:1.25rem; box-shadow:0 8px 24px rgba(0,0,0,.06) }
.btn-primary{ background:var(--vino); color:#fff; font-weight:800 }
.btn-outline{ border:1px solid var(--borde) }
.kpi{ box-shadow:0 8px 24px rgba(0,0,0,.06) }
.tab{ border:1px solid var(--borde); border-radius:999px; padding:.45rem .9rem; font-weight:600 }
.tab[aria-selected="true"]{ background:var(--vino); color:#fff; border-color:var(--vino) }
.pill{ background:var(--niebla); border-radius:999px; padding:.15rem .55rem; font-size:.75rem }
.progress{ height:10px; border-radius:999px; background:var(--niebla); overflow:hidden }
.progress > div{ height:100%; width:0; background:var(--dorado); transition:width .25s }
.qgrid{ display:grid; gap:1rem }
.qcols-2{ grid-template-columns: repeat(2, minmax(0,1fr)) }
.qcols-3{ grid-template-columns: repeat(3, minmax(0,1fr)) }
.qcols-4{ grid-template-columns: repeat(4, minmax(0,1fr)) }
@media (max-width: 768px){ .qcols-2,.qcols-3,.qcols-4{ grid-template-columns:1fr } }

/* === Tema oscuro === */
.dark { --papel:#0f1115; --niebla:#0a0c10; --tinta:#e6e8eb; --borde:#23262d }
html.dark{ color-scheme: dark }
.dark body{ background:var(--niebla); color:var(--tinta) }
.dark .card{ background:var(--papel); border-color:var(--borde); box-shadow:0 8px 24px rgba(0,0,0,.45) }
.dark .btn-outline{ border-color:var(--borde); color:var(--tinta) }
.dark header.sticky{ background:color-mix(in oklab, var(--papel) 90%, transparent); border-color:var(--borde) }
.dark .progress{ background:#1a1d24 }
.dark select, .dark input, .dark textarea { background:#12151b; border-color:var(--borde); color:var(--tinta) }

/* === dialog ancho solicitado === */
dialog::backdrop{ background:rgba(0,0,0,.25) }
dialog{ border:0; padding:0; border-radius:1rem; width:min(1280px,92vw) }

/* ===== Checkgroup (checkbox-pills exclusivas) ===== */
.checkgroup { display:flex; flex-wrap:wrap; gap:.5rem }
.checkgroup .pillcheck{
  user-select:none; cursor:pointer; padding:.4rem .7rem;
  border:1px solid var(--borde); border-radius:999px; font-size:.9rem; line-height:1;
  background:var(--papel); color:var(--tinta);
}
.checkgroup .pillcheck[aria-checked="true"]{
  background:var(--vino); border-color:var(--vino); color:#fff; font-weight:700;
}
.checkgroup[aria-disabled="true"] .pillcheck{ opacity:.45; pointer-events:none }

/* ===== Tabla servicios C2–C3 (no colapsar en móvil) ===== */
.table-wrap { overflow-x:auto; -webkit-overflow-scrolling:touch }
.services-table{
  min-width: 760px; display:grid; gap:.5rem; align-items:center;
  grid-template-columns: 1.8fr .9fr 2.2fr;  /* Etiqueta | ¿Hay? | Calidad */
}
.services-table .hdr{ font-size:.8rem; font-weight:700; color:#667085 }
.services-row{ display:contents }
.services-cell{ padding:.35rem 0 }

/* ======= Matrices (p.ej. F6) ======= */
.matrix-wrap{ overflow-x:auto; -webkit-overflow-scrolling:touch }
.matrix-grid{
  min-width:520px;
  display:grid; gap:.25rem; align-items:center;
  grid-template-columns: 1.8fr repeat(var(--cols,3), minmax(86px,1fr));
}
.matrix-grid .hdr{ font-size:.8rem; font-weight:700; color:#667085; text-align:center }
.matrix-row{ display:contents }
.matrix-cell{ padding:.25rem 0 }
.matrix-cell .checkgroup{ display:grid; grid-template-columns: repeat(var(--cols,3), 1fr); gap:.25rem }
.matrix-cell .pillcheck{ justify-self:stretch; text-align:center; padding:.5rem .25rem }

/* feedback de validación */
.is-invalid{ outline:2px solid #f43f5e; outline-offset:2px; border-radius:.5rem }
/* Botones deshabilitados: aspecto y cursor */
button:disabled,
.btn-primary:disabled,
.btn-outline:disabled{
  opacity:.5; cursor:not-allowed; filter:saturate(.6);
}

/* Hint de error bajo el campo */
.err-hint{ color:#f43f5e; font-size:.75rem; margin-top:.25rem; display:block }

/* Toast superior dentro del modal */
.enc-toast{
  position: sticky; top: 0; z-index: 10;
  background: #fff3f3; color:#7f1d1d; border:1px solid #fecaca;
  border-radius:.75rem; padding:.5rem .75rem; font-size:.9rem; margin-bottom:.5rem;
}
.dark .enc-toast{ background:#2a1212; border-color:#7f1d1d; color:#fecaca }
